{% extends "base_auth.html" %}

{% block title %}Nouveau mot de passe - Whisper Studio{% endblock %}
{% block subtitle %}Choisissez un nouveau mot de passe{% endblock %}

{% block content %}
<form method="POST" action="{{ url_for('reset_password', token=token) }}">
    <div class="form-group">
        <label for="password">Nouveau mot de passe</label>
        <input type="password" id="password" name="password" required autofocus minlength="8">
        <p class="help-text">Minimum 8 caractères</p>
    </div>

    <div class="form-group">
        <label for="password_confirm">Confirmer le mot de passe</label>
        <input type="password" id="password_confirm" name="password_confirm" required minlength="8">
    </div>

    <button type="submit" class="btn">Réinitialiser le mot de passe</button>
</form>

<div class="links">
    <a href="{{ url_for('login') }}">← Retour à la connexion</a>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Validate password match
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('password_confirm');

    function validatePassword() {
        if (password.value !== confirmPassword.value) {
            confirmPassword.setCustomValidity('Les mots de passe ne correspondent pas');
        } else {
            confirmPassword.setCustomValidity('');
        }
    }

    password.addEventListener('change', validatePassword);
    confirmPassword.addEventListener('keyup', validatePassword);
</script>
{% endblock %}
